<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOAR</title>
    <link rel="stylesheet" href="../static/ocorrenciasadmSASS.css">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body>
    {% block body %}
    <header class="header">
        <!-- Cabeçalho contendo as opções que o ADM poderá utilizar -->
        <section class="options">
            <form action="/AddOcorrencia"><a onclick="Redirecionar()"><button class="button-open" id="open">Cadastrar novas ocorrências</button></a></form>
            <form action="/adm"><a onclick="RedirecionarADM()" class="button-redirect">Gerenciar Usuários</a></form>

            <script>
                
                function Redirecionar()
                {
                    window.location.replace("/AddOcorrencia")
                }

                function RedirecionarADM()
                {
                    window.location.replace("/adm")
                }
                
            </script>

        </section>

        <section class="headerlogo">
            <!-- Logo da NOAR exibida na canto superior esquerdo da tela -->
            <img src="../static/img/logo_pequena.png" class="logo">
        </section>
        
        </header>
            <center>     
                <main>
                    <!-- Tabela de Usuários Cadastrados e botões de Ver, Alterar e Excluir-->
                    <form class="tbform" action="">
                        <table>
                            <h2>Ocorrências Registradas</h2>
                            <div class="filtros">
                                <input id="input-busca" style="height: 38px; width: 90%;" type="text" class="form-control mb-2" placeholder="O que você procura?" data-target="#filtros">

                    
                                <button type="button" class="btn btn-primary mb-2" data-toggle="modal" data-target="#filtroModal">
                                    Filtros
                                </button>
                                
                                <div class="modal fade" id="filtroModal" tabindex="-1" role="dialog" aria-labelledby="filtroModal" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h5 class="modal-title" id="filtroModal">Filtros</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                        </div>
                                        <div class="modal-body">
                                            <select class="form-select" id="form_select" aria-label="Default select example">
                                                <option selected>Filtrar por:</option>
                                                <option value="a1" name="" id="code_oc">Código da Ocorrência</option>
                                                <option value="a2" name="a2" id="victim_oc">Vítima da Ocorrência</option>
                                                <option value="a3" name="a3" id="date_oc">Data da Ocorrência</option>
                                                <option value="a4" name="a4" id="local_oc">Local da Ocorrência</option>
                                                <option value="a5" name="a5" id_="type_oc">Tipo da Ocorrência</option>
                                                <option value="a6" name="a6" id="signal_oc">Sinais e Sintomas</option>
                                                <option value="a7" name="a7" id="problem_oc">Problemas Encontrados</option>
                                                <option value="a8" name="a8" id="victimwas_oc">Vítima Era</option>
                                              </select>

                                            

                                            <select class="form-select" style="display: none;" id="form_select_signal">
                                                <option selected>Filtrar por:</option>
                                                <option value="b1" name="b1">Abdômen sensível ou rígido</option>
                                                <option value="b2" name="b2">Afundamento de crânio</option>
                                                <option value="b3" name="b3">Agitação</option>
                                                <option value="b4" name="b4">Amnésia</option>
                                                <option value="b5" name="b5">Angina de peito</option>
                                                <option value="b6" name="b6">Apinéia</option>
                                                <option value="b7" name="b7">Queda própria altura</option>
                                                <option value="b8" name="b8">Afogamento</option>
                                                <option value="b9" name="b9">Agressão</option>
                                                <option value="b10" name="b10">Atropelamento</option>
                                                <option value="b11" name="b11">Bradicardia</option>
                                                <option value="b12" name="b12">Bradipnéia</option>x
                                                <option value="b13" name="b13">Bronco-Aspirando</option>x
                                                <option value="b14" name="b14">Cefaléia</option>x
                                                <option value="b15" name="b15">Cianose</option>x
                                                <option value="b16" name="b16">Convulsão</option>x
                                                <option value="b17" name="b17">Decorticação</option>x
                                                <option value="b18" name="b18">Deformidade</option>
                                                <option value="b19" name="b19">Descerebração</option>
                                                <option value="b20" name="b20">Desmaio</option>
                                                <option value="b21" name="b21">Desvio de traquéia</option>
                                                <option value="b22" name="b22">Dispnéia</option>
                                                <option value="b23" name="b23">Dor local</option>
                                                <option value="b24" name="b24">Edema</option>
                                                <option value="b25" name="b25">Enfisema subcutâneo</option>
                                                <option value="b26" name="b26">Êstase de jugular</option>
                                                <option value="b27" name="b27">Face pálida</option>
                                                <option value="b28" name="b28">Hemorragia</option>
                                                <option value="b29" name="b29">Hipertensão</option>
                                                <option value="b30" name="b30">Hipotensão</option>
                                                <option value="b31" name="b31">Náuseas e Vômitos</option>
                                                <option value="b32" name="b32">Nasoragia</option>
                                                <option value="b33" name="b33">Óbito</option>
                                                <option value="b34" name="b34">Otorréia</option>
                                                <option value="b35" name="b35">Otorragia</option>
                                                <option value="b36" name="b36">O.V.A.C.E</option>
                                                <option value="b37" name="b37">Parada</option>
                                                <option value="b38" name="b38">Priaprismo</option>
                                                <option value="b39" name="b39">Prurido na pele</option>
                                                <option value="b40" name="b40">Pupilas</option>
                                                <option value="b41" name="b41">Sede</option>
                                                <option value="b42" name="b42">Sinal de battle</option>
                                                <option value="b43" name="b43">Sinal de guaxinim</option>
                                                <option value="b44" name="b44">Sudorese</option>
                                                <option value="b45" name="b45">Taquipnéia</option>
                                                <option value="b46" name="b46">Taquicardia</option>
                                                <option value="b47" name="b47">Tontura</option>
                                                <option value="b48" name="b48">Outros Sintomas</option>
                                            </select>

                                            

                                            <select class="form-select" style="display: none;" id="form_select_type">
                                                <option selected>Filtrar por:</option>
                                                <option value="c1" name="c1">Causado por animais</option>
                                                <option value="c2" name="c2">Com meio de Transporte</option>
                                                <option value="c3" name="c3">Desmoronamento</option>
                                                <option value="c4" name="c4">Emergência Médica</option>
                                                <option value="c5" name="c5">Queda de Altura 2M</option>
                                                <option value="c6" name="c6">Tentativa de Suicídio</option>
                                                <option value="c7" name="c7">Queda própria altura</option>
                                                <option value="c8" name="c8">Afogamento</option>
                                                <option value="c9" name="c9">Agressão</option>
                                                <option value="c10" name="c10">Atropelamento</option>
                                                <option value="c11" name="c11">Choque Elétrico</option>
                                                <option value="c12" name="c12">Desabamento</option>
                                                <option value="c13" name="c13">Doméstico</option>
                                                <option value="c14" name="c14">Esportivo</option>
                                                <option value="c15" name="c15">Intoxicação</option>
                                                <option value="c16" name="c16">Queda Bicicleta</option>
                                                <option value="c17" name="c17">Queda Moto</option>
                                                <option value="c18" name="c18">Queda Nível <2M</option>
                                                <option value="c19" name="c19">Trabalho</option>
                                                <option value="c20" name="c20">Transferência</option>
                                            </select>

                                            <select class="form-select" style="display: none;" id="form_select_problems">
                                                <option selected>Filtrar por:</option>
                                                <option value="d1" name="1">Respiratório</option>
                                                <option value="d2" name="2">DPOC</option>
                                                <option value="d3" name="3">Inalação de Fumaça</option>
                                                <option value="d4" name="4">Diabetes</option>
                                                <option value="d5" name="5">Hiperglicemia</option>
                                                <option value="d6" name="6">Hipoglicemia</option>
                                                <option value="d7" name="7">Obstétrico</option>
                                                <option value="d8" name="8">Parto Emergencial</option>
                                                <option value="d9" name="9">Gestante</option>
                                                <option value="d10" name="10">Hemorragia Excessiva</option>
                                                <option value="d11" name="11">Transporte</option>
                                                <option value="d12" name="12">Clínico</option>
                                                <option value="d13" name="13">Aéreo</option>
                                                <option value="d14" name="14">Emergencial</option>
                                                <option value="d15" name="15">Pós-Trauma</option>
                                                <option value="d16" name="16">SAMU</option>
                                                <option value="d17" name="17">Sem Remoção</option>
                                                <option value="d18" name="18">Outro transporte</option>
                                                <option value="d19" name="19">Outros Problemas</option>
                                            </select>

                                            <select class="form-select" style="display: none;" id="form_select_victimwas">
                                                <option selected>Filtrar por:</option>
                                                <option value="e1" name="e1">Ciclista</option>
                                                <option value="e2" name="e2">Condutor de moto</option>
                                                <option value="e3" name="e3">Gestante</option>
                                                <option value="e4" name="e4">Passegeiro do banco da Frente</option>
                                                <option value="e5" name="e5">Passegeiro Moto</option>
                                                <option value="e6" name="e6">Condutor do Carro</option>
                                                <option value="e7" name="e7">Clínico</option>
                                                <option value="e8" name="e8">Trauma</option>
                                                <option value="e9" name="e9">Passeiro banco de trás</option>
                                                <option value="e10" name="e10">Pedestre</option>
                                            </select>

                                            <input type="text" id="filter_text" class="form-control mt-3 mb-3" placeholder="Nome do ">
                                            <input type="text" id="filter_text_other" style="display: none;" class="form-control mt-3 mb-3" placeholder="Outros Transportes:">
                                            <input type="text" id="filter_text_other_problems" style="display: none;" class="form-control mt-3 mb-3" placeholder="Outros Problemas:">
                                            <input type="text" id="filter_text_other_signal" style="display: none;" class="form-control mt-3 mb-3" placeholder="Outros Sinais ou Sintomas:">

                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-primary">Filtrar</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </div>

                    
                            <thead>
                                <tr>
                                    <th class="tbheader_name">Código</th>
                                    <th class="tbheader_cpf">Vítima</th>
                                    <th class="tbheader_type">Data</th>
                                    <th class="tbheader_local">Local</th>
                                    <th class="tbheader_options">Operações</th>
                                </tr>
                            </thead>
                            <tbody id="tabela-ocorrencias">
                                {% for row in dadosdavitima %}
                                
                                <tr class="tbrow_main">
                                    <td class="tbheader_name">{{row.0}}</td>
                                    <td class="tbheader_cpf">{{row.3}}</td>
                                    <td class="tbheader_type">{{row.2}}</td>
                                    <td class="tbheader_local">{{row.7}}</td>
                                    <td class="tbdata_opt">    
                                        <a href="/ver1/{{row.0}}" class="buttons_opt" id="read">Ver</a>
                                        <a href="/alterarOc/{{row.0}}" class="buttons_opt" id="alterar">Alterar</a>
                                        <a href="/deletarOc/{{row.0}}" class="buttons_opt" id="deletar" onclick="return confirm('Você tem certeza?')" style="text-decoration: none;">Deletar</a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </form>
                </main>
            </center>
        {% endblock %}
</body>
<script>
        const INPUT_BUSCA = document.getElementById('input-busca');
        const TABELA_OCORRENCIAS = document.getElementById('tabela-ocorrencias');

        INPUT_BUSCA.addEventListener('keyup', () => {
            let expressao = INPUT_BUSCA.value.toLowerCase();

            if (expressao.length === 1) {
                return;
            }

            let linhas = TABELA_OCORRENCIAS.getElementsByTagName('tr');

            for (let posicao in linhas) {
                if (true === isNaN(posicao)) {
                    continue;
                }

                let conteudoDaLinha = linhas[posicao].innerHTML.toLowerCase();

                if (true === conteudoDaLinha.includes(expressao)) {
                    linhas[posicao].style.display = '';
                } else {
                    linhas[posicao].style.display = 'none';
                }
            }
        });

        // Função para atualizar o placeholder do input com base na opção selecionada
document.getElementById('form_select').addEventListener('change', function() {
    var selectedOptionValue = this.value; // Obtém o valor da opção selecionada
    var inputPlaceholder = ''; // Inicializa a variável para o placeholder

    // Verifica o valor da opção selecionada e define o placeholder correspondente
    switch (selectedOptionValue) {
        case 'a1':
            inputPlaceholder = 'Filtrar por: Código da Ocorrência';
            document.getElementById("form_select_type").style.display = "none";
            document.getElementById("form_select_signal").style.display = "none";
            document.getElementById("form_select_problems").style.display = "none";
            document.getElementById("form_select_victimwas").style.display = "none";
            break;
        case 'a2':
            inputPlaceholder = 'Filtrar por: Vítima da Ocorrência';
            document.getElementById("form_select_type").style.display = "none";
            document.getElementById("form_select_signal").style.display = "none";
            document.getElementById("form_select_problems").style.display = "none";
            document.getElementById("form_select_victimwas").style.display = "none";
            break;
        case 'a3':
            inputPlaceholder = 'Filtrar por: Data da Ocorrência';
            document.getElementById("form_select_type").style.display = "none";
            document.getElementById("form_select_signal").style.display = "none";
            document.getElementById("form_select_problems").style.display = "none";
            document.getElementById("form_select_victimwas").style.display = "none";
            break;
        case 'a4':
            inputPlaceholder = 'Filtrar por: Local da Ocorrência';
            document.getElementById("form_select_type").style.display = "none";
            document.getElementById("form_select_signal").style.display = "none";
            document.getElementById("form_select_problems").style.display = "none";
            document.getElementById("form_select_victimwas").style.display = "none";
            break;
        case 'a5':
            inputPlaceholder = 'Filtrar por: Tipo da Ocorrência';
            document.getElementById("form_select_type").style.display = "flex";
            document.getElementById("form_select_signal").style.display = "none";
            document.getElementById("form_select_problems").style.display = "none";
            document.getElementById("form_select_victimwas").style.display = "none";
            break;
        case 'a6':
            inputPlaceholder = 'Filtrar por: Sinais e Sintomas';
            document.getElementById("form_select_signal").style.display = "flex";
            document.getElementById("form_select_type").style.display = "none";
            document.getElementById("form_select_problems").style.display = "none";
            document.getElementById("form_select_victimwas").style.display = "none";
            break;
        case 'a7':
            inputPlaceholder = 'Filtrar por: Problemas Encontrados';
            document.getElementById("form_select_problems").style.display = "flex";
            document.getElementById("form_select_type").style.display = "none";
            document.getElementById("form_select_signal").style.display = "none";
            document.getElementById("form_select_victimwas").style.display = "none";
            break;
        case 'a8':
            inputPlaceholder = 'Filtrar por: Vítima Era';
            document.getElementById("form_select_victimwas").style.display = "flex";
            document.getElementById("form_select_type").style.display = "none";
            document.getElementById("form_select_signal").style.display = "none";
            document.getElementById("form_select_problems").style.display = "none";
            break;   
        default:
            inputPlaceholder = 'Nome do ';
    }

    // Atualiza o placeholder do input
    document.getElementById('filter_text').setAttribute('placeholder', inputPlaceholder);
});
</script>
</html>
 